<!-- new-order-dialog.component.html -->
<mat-toolbar class="neworder-toolbar">
  Customer {{ inj.customerName ?? ('#' + (form.value.custId ?? '')) }} - New Order
</mat-toolbar>

<form [formGroup]="form" (ngSubmit)="submit()" class="form-grid">
    <h3>Order</h3>
    <div class="row">
        <mat-form-field appearance="fill" class="grow">
            <mat-label>Employee*</mat-label>
            <mat-select formControlName="empId" required>
                <mat-option *ngFor="let e of employees" [value]="e.empId">{{ e.fullName }}</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="grow">
            <mat-label>Shipper*</mat-label>
            <mat-select formControlName="shipperId" required>
                <mat-option *ngFor="let s of shippers" [value]="s.shipperId">{{ s.companyName }}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <mat-form-field appearance="fill" class="full">
        <mat-label>Ship Name*</mat-label>
        <input matInput formControlName="shipName" required>
    </mat-form-field>

    <div class="row">
        <mat-form-field appearance="fill" class="grow">
            <mat-label>Ship Address*</mat-label>
            <input matInput formControlName="shipAddress" required>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Ship City*</mat-label>
            <input matInput formControlName="shipCity" required>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Ship Country*</mat-label>
            <input matInput formControlName="shipCountry" required>
        </mat-form-field>
    </div>

    <div class="row">
        <mat-form-field appearance="fill">
            <mat-label>Order Date*</mat-label>
            <input matInput [matDatepicker]="od" formControlName="orderDate" required>
            <mat-datepicker-toggle matSuffix [for]="od"></mat-datepicker-toggle>
            <mat-datepicker #od></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Required Date*</mat-label>
            <input matInput [matDatepicker]="rd" formControlName="requiredDate" required>
            <mat-datepicker-toggle matSuffix [for]="rd"></mat-datepicker-toggle>
            <mat-datepicker #rd></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Shipped Date</mat-label>
            <input matInput [matDatepicker]="sd" formControlName="shippedDate" required>
            <mat-datepicker-toggle matSuffix [for]="sd"></mat-datepicker-toggle>
            <mat-datepicker #sd></mat-datepicker>
        </mat-form-field>
    </div>

    <mat-form-field appearance="fill" class="full">
        <mat-label>Freight*</mat-label>
        <input matInput formControlName="freight" type="number" step="0.01" required>
    </mat-form-field>

    <mat-divider></mat-divider>
    <h3>Order Details</h3>

    <div class="row">
        <mat-form-field appearance="fill" class="grow">
            <mat-label>Product*</mat-label>
            <mat-select formControlName="productId" required>
                <mat-option *ngFor="let p of products" [value]="p.productId">{{ p.productName }}</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Unit Price*</mat-label>
            <input matInput formControlName="unitPrice" type="number" step="0.01" required>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Quantity*</mat-label>
            <input matInput formControlName="qty" type="number" required>
        </mat-form-field>

        <mat-form-field appearance="fill">
            <mat-label>Discount*</mat-label>
            <input matInput formControlName="discount" type="number" step="0.001" min="0" max="0.999" required>
        </mat-form-field>
    </div>

    <div class="actions">
        <button mat-button type="button" mat-dialog-close>Close</button>
        <button mat-flat-button color="primary" type="submit" [disabled]="form.pending || form.invalid">Save</button>
    </div>
</form>